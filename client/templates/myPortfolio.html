{% extends "layout.html" %}




{% block content %}

{% if user %}
{% if portfolio %}
{% block title %}
    <h1>{{ portfolio.pseudo }}</h1>
{% endblock %}
    <div>
      {% set coverClass="basicCover" %}
      {% set coverPath="" ~ url_for('static', filename='img/basic_cover.png') %}

      {% if portfolio.coverPicture.id %}
        {% set coverPath="/portfolio/" ~ portfolio.portfolioId ~ "/resource/" ~ portfolio.coverPicture.id %}
        {% set coverClass="customCover" %}
      {% endif %}

 
        <div class={{ coverClass }} id="cover" style="width :900px; height:200px; display:block; margin:auto;" data-toggle="modal" data-target="#addCoverPictureModal">
            <span style="cursor:pointer;">change picture cover</span>
            <img src="{{ coverPath }}" alt="" class="img-responsive" />
        </div>

        <!-- Modal -->
        <div id="addCoverPictureModal" class="modal fade" role="dialog">
          <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Choose your best picture</h4>
              </div>
              <div class="modal-body">
                <form id="addCoverPictureForm" enctype="multipart/form-data">
                    <input type="file" name="file" id="addCoverPicture" attr-userId="{{user.id}}" attr-portfolioId="{{portfolio.portfolioId}}" style="margin-top:6px">
                </form>
              </div>
              <div class="modal-footer">
                <button type="submit" class="btn btn-primary" id="uploadtrigger">Upload</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              </div>
            </div>

          </div>
        </div>

        Débug : {{ portfolio.portfolioId }}
        portfolio data : {{ portfolio }}
            <li>
                <p>Domaine d'activité : {{ portfolio.fieldActivity }} </p>
                <p>Lieu : {{ portfolio.place }} </p>
                <p>Liens :<br/>
                    <ul>
                    {% for network in portfolio.networking %}
                    <li>{{ network["network"] }} : <a href=http://{{ network["url"] }}> {{ network['url'] }}</a></li>
                    {% endfor %}
                    </ul>
                </p>
                {% if portfolio.availability is defined %}
                <p>Je suis dispo du {{ portfolio.availability["begin"] }} au {{ portfolio.availability["end"] }}</p>
                {% endif %}
                {% if portfolio.contact is defined %}
                <p>Contact :  <br/><i class="fa fa-user"></i> {{ portfolio.contact["name"] }} <br/><i class="fa fa-phone"></i> {{ portfolio.contact["phone"] }}  <br/><i class="fa fa-envelope"></i> {{ portfolio.contact["mail"] }}</p>
                {% endif %}
            </li>

            <button id="deleteportfolio" data-toggle="modal" data-target="#deletePortfolio" value="Delete">Delete my portfolio :( </button>
    </div>

<div id="deletePortfolio" class="modal fade" role="dialog" data-userId="{{ user.id }}" data-portfolioId="{{ portfolio.portfolioId }}">
          <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Delete your portfolio</h4>
              </div>
              <div class="modal-body">
                <p> Are you sure that you want to delete your beautiful portfolio ? </p>
              </div>
              <div class="modal-footer">
                <button type="submit" class="btn btn-primary" id="deletePortfolioTrigger">Yes, I'm sure</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">No, keep it safe.</button>
              </div>
            </div>

          </div>
        </div>

    {% else %}
    <p> On dirait que le portfolio que vous recherchez n'est plus disponible... </p>
    {% endif %}

{% else %}
<p> You can see this portfolio as a simple user </p>
{% endif %}
{% endblock %}

